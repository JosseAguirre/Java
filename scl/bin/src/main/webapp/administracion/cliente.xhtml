<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="/templates/menuT.xhtml">
	<ui:define name="panel"></ui:define>
	<ui:define name="content">
		<p:messages id="mensaje" autoUpdate="false"/>	
		
		<p:panel header="Datos del Cliente">
		
			<h:panelGrid id="pnl" columns="3" border="0">
			
				<p:outputLabel value="Ciudad" for="ciudad" />
				<p:selectOneMenu id="ciudad" value="#{admClienteBean.idciudad}"
					required="true" requiredMessage="Requerido">
					<f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
					<f:selectItems value="#{admClienteBean.listaciudad}" var="item"
						itemLabel="#{item.nombre}" itemValue="#{item.iddetallecatalogo}">
					</f:selectItems>
				</p:selectOneMenu>
				<p:message for="ciudad" />
				
				<p:outputLabel value="Tipo de CLiente" for=" tipocliente"/>
				<p:selectOneMenu id="tipocliente" value="#{admClienteBean.idtipocliente}" required="true" requiredMessage="Requerido">
					<f:selectItem itemLabel="Seleccionar" itemValue="#{null}"/>
						<f:selectItems value="#{admClienteBean.listatipocliente}"
						               var="item" itemLabel="#{item.nombre}" 
						               itemValue="#{item.iddetallecatalogo}">
						</f:selectItems>
				</p:selectOneMenu>
				<p:message for="tipocliente"/>
				
				<p:outputLabel value="Cliente Padre" for="clientepadre"/>
				<p:selectOneMenu id="clientepadre" value="#{admClienteBean.idcientepadre}">  
					<f:selectItem itemLabel="Seleccionar" itemValue="0"/>
						<f:selectItems value="#{admClienteBean.listaclientepadre}" 
						               var="item" itemLabel="#{item.razonsocial}"
						               itemValue="#{item.idcliente}">
						</f:selectItems>
				</p:selectOneMenu>
				<p:message for="clientepadre"/>
				
				<p:outputLabel value="Razón Social" for="razonsocial"/>
				<p:inputText id="razonsocial"
				             value="#{admClienteBean.admcliente.razonsocial}"
				             required="true" requiredMessage="Requerido"
				             onkeyup="this.value = this.value.toUpperCase();" >                            				
				</p:inputText>
				<p:message for="razonsocial" />
				
				<p:outputLabel value="Nombre Comercial" for="nombrecomercial"/>
				<p:inputText id="nombrecomercial"
				             value="#{admClienteBean.admcliente.nombrecomercial}"
				             required="true" requiredMessage="Requerido"
				             onkeyup="this.value = this.value.toUpperCase();" >                            				
				</p:inputText>
				<p:message for="nombrecomercial" />
				
				<p:outputLabel value="RUC" for="ruc"/>
				<p:inputText id="ruc"
				             value="#{admClienteBean.admcliente.ruc}"
				             required="true" requiredMessage="Requerido"
				             onkeyup="this.value = this.value.toUpperCase();" >                            				
				</p:inputText>
				<p:message for="ruc" />
				
				<p:outputLabel value="Actividad" for="actividad" />
				<p:selectOneMenu id="actividad" value="#{admClienteBean.idactividad}"
					required="true" requiredMessage="Requerido">
					<f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
					<f:selectItems value="#{admClienteBean.listaactividad}" var="item"
						itemLabel="#{item.nombre}" itemValue="#{item.iddetallecatalogo}">
					</f:selectItems>
				</p:selectOneMenu>
				<p:message for="actividad" />
				
				<p:outputLabel value="Prioridad" for="prioridad" />
				<p:selectOneMenu id="prioridad" value="#{admClienteBean.idprioridad}"
					required="true" requiredMessage="Requerido">
					<f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
					<f:selectItems value="#{admClienteBean.listaprioridad}" var="item"
						itemLabel="#{item.nombre}" itemValue="#{item.iddetallecatalogo}">
					</f:selectItems>
				</p:selectOneMenu>
				<p:message for="prioridad" />
				
				<p:outputLabel value="Dirección" for="direccion"/>
				<p:inputText id="direccion"
				             value="#{admClienteBean.admcliente.direccion}"
				             required="true" requiredMessage="Requerido"
				             onkeyup="this.value = this.value.toUpperCase();" >                            				
				</p:inputText>
				<p:message for="direccion" />
				
				<p:outputLabel value="Teléfono" for="telefono"/>
				<p:inputText id="telefono"
				             value="#{admClienteBean.admcliente.telefono}"
				             required="true" requiredMessage="Requerido"
				             onkeyup="this.value = this.value.toUpperCase();" >                            				
				</p:inputText>
				<p:message for="telefono" />
				
				<p:outputLabel value="Correo Electrónico" for="correoelectronico"/>
				<p:inputText id="correoelectronico"
				             value="#{admClienteBean.admcliente.correoelectronico}"
				             required="true" requiredMessage="Requerido" >                            				
				</p:inputText>
				<p:message for="correoelectronico" />
				
				<p:outputLabel value="Estado" for="estado" />
				<p:selectOneMenu id="estado" value="#{admClienteBean.idestado}"
					required="true" requiredMessage="Requerido">
					<f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
					<f:selectItems value="#{admClienteBean.listaestado}" var="item"
						itemLabel="#{item.nombre}" itemValue="#{item.iddetallecatalogo}">
					</f:selectItems>
				</p:selectOneMenu>
				<p:message for="estado"/>				
							
			</h:panelGrid>
			
			<p:commandButton value="Guardar"
				action="#{admClienteBean.persistir()}"
				update=":frm:pnl :frm2:tbl :frm:growl" icon="ui-icon-disk" oncomplete="PF('dlg').show();">
			</p:commandButton>
			<p:dialog header="Modal Dialog" widgetVar="dlg" modal="true" height="100">
    				<h:outputText value="Cliente ingresado exitosamente"/>
			</p:dialog>			
		</p:panel>
	</ui:define>
	
	<ui:define name="content2">
	
	
	
			<p:dataTable id="tbl" value="#{admClienteBean.listacliente}"
			 var="item" paginator="true" rows="10"
			 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
			 paginatorPosition="bottom" editable="true"
			 tableStyle="width: auto; white-space: nowrap" widgetVar="tablaCliente" 
			 filteredValue="#{admClienteBean.clientefiltrado}"
			 emptyMessage="No existen registros con ese criterio" 
			 styleClass="table"
			 reflow="true"
			 selectionMode="single"
			 
			 rowKey="#{item.idcliente}">
			 
				<f:facet name="header">
					<div class="row row-nomargin">
						<div class="col-lg-3">
						<p:inputText id="globalFilter" onkeyup="PF('tablaCliente').filter()" class="pull-left" style="width: 100%" placeholder="xxxxxxxx" />
					</div>
					<div class="col-lg-6">
						<h:outputText value="Lista de Clientes" />
					</div>
						<div class="col-lg-3">
						<div class="pull-right">
								<p:commandButton action="#{admClienteBean.Eliminar}"
									update=":frm2:tbl :frm:growl" title="Eliminar" value="Eliminar"
									class="btn-primary" icon="fa fa-list">
									<p:confirm header="Confirmacion" message="Desea eliminar el Registro..?" icon="ui-icon-alert" />
								</p:commandButton>
							</div>
						</div>
					</div>
				</f:facet>
				
				<p:ajax event="rowSelect" listener="#{admClienteBean.onRowSelect}"	update=":frm:pnl" />
								
			
				<p:column headerText="Código" filterBy="#{item.idcliente}"
					filterStyle="display:none">
					<h:outputText value="#{item.idcliente}" />
				</p:column>
				
				<p:column headerText="Razón Social" filterBy="#{item.razonsocial}"
					filterStyle="display:none">
					<h:outputText value="#{item.razonsocial}" />
				</p:column>
				
				<p:column headerText="Nombre Comercial" filterBy="#{item.nombrecomercial}"
					filterStyle="display:none">
					<h:outputText value="#{item.nombrecomercial}" />
				</p:column>
				
				<p:column headerText="Cliente Padre" filterBy="#{item.idclientepadre.razonsocial}"
					filterStyle="display:none">
					<h:outputText value="#{item.idclientepadre.razonsocial}" />
				</p:column>
				
				<p:column headerText="RUC" filterBy="#{item.ruc}"
					filterStyle="display:none">
					<h:outputText value="#{item.ruc}" />
				</p:column>
				
				<p:column headerText="Actividad" filterBy="#{item.idactividaddc.nombre}"
					filterStyle="display:none">
					<h:outputText value="#{item.idactividaddc.nombre}" />
				</p:column>
				
				<p:column headerText="Tipo Cliente" filterBy="#{item.idtipoclientedc.nombre}"
					filterStyle="display:none">
					<h:outputText value="#{item.idtipoclientedc.nombre}" />
				</p:column>
				
				<p:column headerText="Ciudad" filterBy="#{item.idciudaddc.nombre}"
					filterStyle="display:none">
					<h:outputText value="#{item.idciudaddc.nombre}" />
				</p:column>
				
				<p:column headerText="Estado" filterBy="#{item.idestadodc.nombre}"
					filterStyle="display:none
					">
					<h:outputText value="#{item.idestadodc.nombre}" />
				</p:column>
								
			</p:dataTable>	
	</ui:define>
	<!--  -->
	<ui:define name="content3">
		<p:messages id="mensaje" autoUpdate="false"/>	
		
		<p:panel header="Asignar Sistema">
		
	
			<h:panelGrid id="pnl" columns="3" border="0">
				
				<p:outputLabel value="Cliente" for="cliente" />
				<p:selectOneMenu id="cliente" value="#{admClienteAgenciaSistemaBean.idcliente}"
					required="true" requiredMessage="Requerido">
					<f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
					<f:selectItems value="#{admClienteAgenciaSistemaBean.listaCliente}" var="item"
						itemLabel="#{item.nombrecomercial}" itemValue="#{item.idcliente}">
					</f:selectItems>
				</p:selectOneMenu>
				<p:message for="cliente" />
				
				<p:outputLabel value="Sistema" for="sistema" />
				<p:selectOneMenu id="sistema" value="#{admClienteAgenciaSistemaBean.idsistema}"
					required="true" requiredMessage="Requerido">
					<f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
					<f:selectItems value="#{admClienteAgenciaSistemaBean.listasistema}" var="item"
						itemLabel="#{item.nombre}" itemValue="#{item.idsistemas}">
					</f:selectItems>
				</p:selectOneMenu>
				<p:message for="sistema" />
				
				<p:outputLabel value="Código Sistema" for="codigosistema"/>
				<p:inputText id="codigosistema"
				             value="#{admClienteAgenciaSistemaBean.admclienteagenciasistema.valor}"
				             required="true" requiredMessage="Requerido" >                            				
				</p:inputText>
				<p:message for="codigosistema" />
							
			</h:panelGrid>
						
			<p:commandButton value="Agregar Sistema"
				action="#{admClienteAgenciaSistemaBean.persitirCliente}"
				update=":frm3:pnl
				 :frm4:tbl2 :frm3:growl" icon="ui-icon-disk" oncomplete="PF('dlg').show();">
			</p:commandButton>
			
			
			<p:dialog header="Modal Dialog" widgetVar="dlg" modal="true" height="100">
    				<h:outputText value="Sistema asignado exitosamente"/>
			</p:dialog>			
		</p:panel>
	</ui:define>
	
	<ui:define name="content4">
			 
			 	
	
			<p:dataTable id="tbl2" value="#{admClienteAgenciaSistemaBean.listaClienteSistema}"
			 var="item2" paginator="true" rows="5"
			 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
			 paginatorPosition="bottom" editable="true"
			 tableStyle="width: auto; white-space: nowrap" widgetVar="tablaClienteSistemas" 
			 filteredValue="#{admClienteAgenciaSistemaBean.clienteFiltrado}"
			 emptyMessage="No existen registros con ese criterio"
			 styleClass="table"
			 reflow="true"
			 selectionMode="single"
			 
			 rowKey="#{item2.idclienteAgenciaSistemas}">
			 
			 <f:facet name="header">
					<div class="row row-nomargin">
						<div class="col-lg-3">
						<p:inputText id="globalFilter" onkeyup="PF('tablaClienteSistemas').filter()" class="pull-left" style="width: 100%" placeholder="xxxxxxxx" />
					</div>
					<div class="col-lg-6">
						<h:outputText value="Lista de Clientes y Sistemas" />
					</div>
						<div class="col-lg-3">
						<div class="pull-right">
								<p:commandButton action="#{admClienteBean.Eliminar}"
									update=":frm2:tbl :frm:growl" title="Eliminar" value="Eliminar"
									class="btn-primary" icon="fa fa-list">
									<p:confirm header="Confirmacion" message="Desea eliminar el Registro..?" icon="ui-icon-alert" />
								</p:commandButton>
							</div>
						</div>
					</div>
				</f:facet>
				
				<p:ajax event="rowSelect" listener="#{admClienteAgenciaSistemaBean.onRowSelectCliente}"	update=":frm3:pnl" />
			 
				
				<p:column headerText="Id" filterBy="#{item2.idclienteAgenciaSistemas}"
					filterStyle="display:none">
					<h:outputText value="#{item2.idclienteAgenciaSistemas}" />
				</p:column>
        		
        		<p:column headerText="Cliente" filterBy="#{item2.idcliente.razonsocial}"
					filterStyle="display:none">
					<h:outputText value="#{item2.idcliente.razonsocial}" />
				</p:column>
        		
        		<p:column headerText="Sistema" filterBy="#{item2.idsistemas.nombre}"
					filterStyle="display:none">
					<h:outputText value="#{item2.idsistemas.nombre}" />
				</p:column>
        		
        		<p:column headerText="Valor" filterBy="#{item2.valor}"
					filterStyle="display:none">
					<h:outputText value="#{item2.valor}" />
				</p:column>				
				
								
			</p:dataTable>	
	</ui:define>
</ui:composition>
</html>
